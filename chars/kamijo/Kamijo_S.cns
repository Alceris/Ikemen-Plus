;===========================================================================
; 必殺技
;===========================================================================
;---------------------------------------------------------------------------
;連続そげぶ
;---------------------------------------------------------------------------
[Statedef 1000,連続そげぶ始動]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1000
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1000
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1000
value = 1000

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
var(6) = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(6) >= 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(6) >= 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(6) >= 0
time = 1
add = (128/24)*-animtime,(128/24)*-animtime,(256/24)*-animtime

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(4)>=0&&AnimElemTime(6)<=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4)>=0&&AnimElemTime(6)<=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, VarAdd]
type = VarSet
trigger1 = command = "a" || command = "b" || command = "c"
var(58) = ifelse(command = "c",3,ifelse(command = "b",2,1))

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 1
var(58) = 0

	[State 1000,vel]
		Type=velSet
		Trigger1=AnimElem=4
		x=4

	[State 1000,veladd]
		Type=velAdd
		Trigger1=AnimElem=6
		x=-3

	[State 1000,veladd]
		Type=velSet
		Trigger1=AnimElem=7
		x=0

	[State 1000,Snd1]
		Type=playSnd
		Trigger1=AnimElem=1
		value=3,10
		channel=4

	[State 1000,Snd2]
		Type=playSnd
		Trigger1=AnimElem=4
		value=1,20
		channel=1

	[State 1000,Explod]
		Type=Explod
		Trigger1=AnimElem=4
		Anim=1001
		sprPriority=3
		Pos=0,0
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=1
		IgnoreHitPause=0
		trans=add
		PauseMoveTime = -1

	[State 1000,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(5)>=0
;		Trigger1=AnimElemTime(6)<0
		Attr=,SA
		AnimType=hard
		Air.AnimType=back
		HitFlag = MAFD
		Guardflag=MA
		Ground.Type=low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-25,floor(-60*const(Size.yScale))
		HitSound=S0,12
		GuardSound=S1,1
		damage=ceil(20/(fvar(0)-fvar(1))),8
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=45,16
		GivePower=31,16
		PauseTime=8,10
		Ground.SlideTime=28
		Ground.HitTime=22
		Air.HitTime=18
		Guard.SlideTime=28
		Guard.HitTime=20
		Ground.velocity=-3
		Guard.velocity=-2.5
		Air.velocity=-6,-4.85
		AirGuard.velocity=-2.5,-5
		ground.cornerpush.veloff = 0;-(fVar(11)*0.555)
		Air.cornerpush.veloff = 0; -(fVar(11)*0.555)
		Air.fall=1
		fall.recover=0
		mindist = 10,-25
		maxdist = 40,0
		ID=1000
		yaccel =.4
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 96 && p2dist X >= 11 && p2dist Y >= -79)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State -1,汎用初期化]
		type = Null;Varset
		trigger1 = numTarget(1000)
		trigger1 = Target(1000),statetype = A
		trigger1 = movehit=1
		var(10)= abs(Target(1000),pos x - pos x )
		persistent = 0
 		ignorehitpause = 1

	[State 2000,位置固定]
		type = Null;TargetBind
		trigger1 = numTarget(1000)
		trigger1 = Target(1000),statetype = A
		trigger1 = movehit=1
		time = 1
		pos = var(10),0
		persistent = 0
		ignorehitpause = 1

	[State 1000,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1
	
	[State 1000,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1050,連続そげぶ(上段派生1)]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1050
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1050
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1050
value = 1050

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(2) < 0 || AnimElemTime(5) >= 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(2) < 0 || AnimElemTime(5) >= 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(2) < 0
time = 1
add = (128/10)*-animelemtime(2),(128/10)*-animelemtime(2),(256/10)*-animelemtime(2)

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(5) >= 0
time = 1
add = (128/16)*-animtime,(128/16)*-animtime,(256/16)*-animtime

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(2)>=0&&AnimElemTime(5)<=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(2)>=0&&AnimElemTime(5)<=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, VarAdd]
type = VarSet
trigger1 = command = "a" || command = "b" || command = "c"
var(58) = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 1
var(58) = 0

	[State 1050,vel]
		Type=velSet
		Trigger1=AnimElem=2
		x=6

	[State 1050,vel]
		Type=velSet
		Trigger1=AnimElem=4
		x=0

	[State 1050,Snd2]
		Type=playSnd
		Trigger1=AnimElem=2
		value=1,20
		channel=1

	[State 1050,Explod]
		Type=Explod
		Trigger1=AnimElem=2
		Anim=1051
		sprPriority=3
		Pos=0,0
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=1
		IgnoreHitPause=0
		trans=add
		PauseMoveTime = -1

	[State 1050,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(3)>=0
;		Trigger1=AnimElemTime(4)<0
		Attr=,SA
		AnimType=hard
		Air.AnimType=back
		HitFlag = MAFD
		Guardflag=MA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-25,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		damage=ceil(20/(fvar(0)-fvar(1))),8
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=50,16
		GivePower=31,16
		PauseTime=8,10
		Ground.SlideTime=28
		Ground.HitTime=20
		Air.HitTime=26
		Guard.SlideTime=21
		Guard.HitTime=19
		Ground.velocity=-2
		Guard.velocity=-2
		Air.velocity=-6,-3.5
		AirGuard.velocity=-2.5,-5
		ground.cornerpush.veloff = 0; -(fVar(11)*0.222)
		Air.cornerpush.veloff = 0; -(fVar(11)*0.222)
		Air.fall=1
		fall.recover=0
		mindist = 10,-25
		maxdist = 40,0
		ID=1050
		yaccel =.45
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 98 && p2dist X >= -21 && p2dist Y >= -92)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1000,v1=1]
		Type=VarSet
		trigger1 = movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1050,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1075,連続そげぶ(中段派生1)]
	Type=S
	MoveType=A
	physics=N
	velset=0,0
	Ctrl=0
	faceP2=1
	Anim=1075
;	Poweradd=FVar(11)
	sprPriority=2

[State 0, VarAdd]
type = VarSet
trigger1 = command = "a" || command = "b" || command = "c"
var(58) = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !Time
var(58) = 0

	[State 1075,vel]
		Type=velSet
		Trigger1=AnimElemTime(5)=0
		x=4

	[State 1075,veladd]
		Type=velSet
		Trigger1=AnimElemTime(8)=3
		x=0

	[State 1075,Snd2]
		Type=playSnd
		Trigger1=AnimElemTime(5)=0
		value=1,20
		channel=1

	[State 1075,Explod]
		Type=Explod
		Trigger1=AnimElemTime(5)=0
		Anim=1127
		sprPriority=3
		Pos=0,-20
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=1
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1075,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact
		Trigger1=!MoveReversed
		Trigger1=AnimElemTime(7)>=0
		Trigger1=AnimElemTime(8)<0
		Attr=S,SA
		AnimType=hard
		Air.AnimType=back
		HitFlag = MAFD
		Guardflag=HA
		Ground.Type=low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-25,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		damage=ceil(20/(fvar(0)-fvar(1))),8
		Priority=5,Hit
		GetPower=45,16
		GivePower=31,16
		PauseTime=10,10
		Ground.SlideTime=28
		Ground.HitTime=18
		Air.HitTime=26
		Guard.SlideTime=21
		Guard.HitTime=18
		Ground.velocity=-4
		Guard.velocity=-3.5
		Air.velocity=-6,-3
		AirGuard.velocity=-2.5,-4
		ground.cornerpush.veloff = 0; -(fVar(11)*0.444)
		Air.cornerpush.veloff = 0; -(fVar(11)*0.444)
		Air.fall=1
		mindist = 10,-25
		maxdist = 40,0
		fall.recover=0
		ID=1075
		yaccel =.45

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 1000,v1=1]
		Type=VarSet
		Trigger1=numtarget(1075)
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1075,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1100,連続そげぶ(下段派生1)]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1100
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1100
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1100
value = 1100

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(7) >= 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(7) >= 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(7) >= 0
time = 1
add = (128/21)*-animtime,(128/21)*-animtime,(256/21)*-animtime

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(7)<=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(7)<=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, VarAdd]
type = VarSet
trigger1 = command = "a" || command = "b" || command = "c"
var(58) = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 1
var(58) = 0

	[State 1100,NotHit]
		Type=Null;notHitBy
		Trigger1=1
		value=,AP

	[State 1100,vel]
		Type=velSet
		Trigger1=AnimElem=1
		x=5
		y=0

	[State 1100,veladd]
		Type=velAdd
		Trigger1=AnimElem=2
		x=-2

	[State 1100,veladd]
		Type=velSet
		Trigger1=AnimElem=5
		x=0

	[State 1100,Snd2]
		Type=playSnd
		Trigger1=AnimElem=2
		value=1,20
		channel=1

	[State 1100,Explod]
		Type=Explod
		Trigger1=AnimElem=5
		Anim=1101
		sprPriority=3
		Pos=0,0
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=1
		IgnoreHitPause=0
		trans=add
		PauseMoveTime = -1

	[State 1100,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(5)>=0
;		Trigger1=AnimElemTime(6)<0
		Attr=,SA
		AnimType=hard
		Air.AnimType=back
		Hitflag=MAF
		Guardflag=L
		Ground.Type=low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-25,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		damage=ceil(18/(fvar(0)-fvar(1))),8
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=45,16
		GivePower=31,16
		PauseTime=8,10
		Ground.SlideTime=28
		Ground.HitTime=23
		Air.HitTime=26
		Guard.SlideTime=27
		Guard.HitTime=26
		Ground.velocity=-3.5
		Guard.velocity=-4
		Air.velocity=-5,8
		AirGuard.velocity=-2.5,-4
		ground.cornerpush.veloff = 0; -(fVar(11)*0.333)
		Air.cornerpush.veloff = 0; -(fVar(11)*0.333)
		Air.fall=1
		fall.recover=0
		ID=1100
		mindist = 10,-25
		maxdist = 40,0
		yaccel =.45
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 40 && p2dist X >= -2)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1000,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded&&numtarget(1100)
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1100,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1125,連続そげぶ(上段派生2)]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1125
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1125
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1125
value = 1125

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(6) < 0 || AnimElemTime(11) >= 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(6) < 0 || AnimElemTime(11) >= 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(6) < 0
time = 1
add = (128/16)*-animelemtime(6),(128/16)*-animelemtime(6),(256/16)*-animelemtime(6)

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(11) >= 0
time = 1
add = (128/6)*-animtime,(128/6)*-animtime,(256/6)*-animtime

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(6)>=0&&AnimElemTime(11)<=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(6)>=0&&AnimElemTime(11)<=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 1125,NotHit]
		Type=Null;notHitBy
		Trigger1=1
		value=,AP
		Time=1

	[State 1125,vel]
		Type=velSet
		Trigger1=AnimElem=6
		x=4

	[State 1125,vel]
		Type=velSet
		Trigger1=AnimElem=9
		x=0

	[State 1125,Snd2]
		Type=playSnd
		Trigger1=AnimElemTime(5)=0
		value=1,16
		channel=1

	[State 1125,Explod]
		Type=Explod
		Trigger1=AnimElem=6
		Anim=1127
		sprPriority=3
		Pos=5,0
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=1
		IgnoreHitPause=0
		trans=add
		PauseMoveTime = -1

	[State 1125,Width]
		Type=Width
		Trigger1=(AnimElemTime (1)>=0)&&(AnimElemTime (7)<0)
		value=15,0

	[State 1125,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(6)>=0
;		Trigger1=AnimElemTime(7)<0
		Trigger1=enemynear,MoveType!=A ||var(2) = 0
		Attr=,SA
		AnimType=back
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=Low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(47/(fvar(0)-fvar(1))),9
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=50,16
		GivePower=31,16
		PauseTime=10,12
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=24
		Guard.SlideTime=27
		Guard.HitTime=22
		Ground.velocity=-6.5,-4.2
		Guard.velocity=-4
		Air.velocity=-6,-3.25
		AirGuard.velocity=-2.5,-2.8
		ground.cornerpush.veloff = 0
		Air.cornerpush.veloff = 0
		fall=1
		fall.recover=0
		ID=1125
		mindist = 10,-25
		maxdist = 40,0
		yaccel =.4
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 92 && p2dist X >= -3 && p2dist Y >= -77)
		
	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1125,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(6)>=0
;		Trigger1=AnimElemTime(7)<0
		Trigger1=enemynear,MoveType=A || var(2) != 0
		Attr=,SA
		AnimType=hard
		Air.AnimType=back
		Hitflag=MAF
		Guardflag=HA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(53/(fvar(0)-fvar(1))),9
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=31,16
		GivePower=31,16
		PauseTime=10,12
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=24
		Guard.SlideTime=27
		Guard.HitTime=26
		Ground.velocity=-6.5,-4.2
		Guard.velocity=-4
		Air.velocity=-6,-5
		AirGuard.velocity=-3.5,-4.25
		ground.cornerpush.veloff = 0; -(fVar(11)*0.333)
		Air.cornerpush.veloff = 0; -(fVar(11)*0.333)
		fall=1
		fall.recover=0
		ID=1126
		mindist = 10,-25
		maxdist = 40,0
		yaccel =.4
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 92 && p2dist X >= -3 && p2dist Y >= -77)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State -1,汎用初期化]
		type = Null;Varset
		trigger1 = movehit=1
		var(10)= abs(Target(1125),pos x - pos x )
		persistent = 0
 		ignorehitpause = 1

	[State 2000,位置固定]
		type = Null;TargetBind
		trigger1 = movehit=1
		time = 1
		pos = var(10)+20,0
		persistent = 0
		ignorehitpause = 1

	[State 52,0];?
		type = Width
		trigger1 = movehit=1
		value = 32,0

	[State 1125,v1=1]
		Type=VarSet
		trigger1 = movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1125,end of State]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1
		
;---------------------------------------------------------------------------
[Statedef 1150,連続そげぶ(中段派生2)]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1150
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1150
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1150
value = 1150

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4) < 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(4) < 0
time = 1
add = (128/11)*-animelemtime(4),(128/11)*-animelemtime(4),(256/11)*-animelemtime(4)

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(4)>=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4)>=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 1150,vel]
		Type=velSet
		Trigger1=AnimElem=4
		x=3

	[State 1150,vel]
		Type=velSet
		Trigger1=AnimElem=6
		x=0

	[State 1150,Snd2]
		Type=playSnd
		Trigger1=AnimElemTime(4)=0
		value=1,16
		channel=1

	[State 1150,Explod]
		Type=Explod
		Trigger1=AnimElemTime(4)=0
		Anim=1151
		sprPriority=3
		Pos=5,0
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=1
		IgnoreHitPause=0
		trans=add
		PauseMoveTime = -1

	[State 1150,Width]
		Type=Width
		Trigger1=(AnimElemTime (1)>=0)&&(AnimElemTime (7)<0)
		value=30,0

	[State 1150,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(6)>=0
;		Trigger1=AnimElemTime(7)<0
		Attr=,SA
		AnimType=hard
		Air.AnimType=back
		Hitflag=MAF
		Guardflag=HA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(50/(fvar(0)-fvar(1))),9
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=45,16
		GivePower=31,16
		PauseTime=10,12
		Ground.SlideTime=30
		Ground.HitTime=30
		Air.HitTime=24
		Guard.SlideTime=26
		Guard.HitTime=26
		Ground.velocity=-2.0
		Guard.velocity=-4
		Air.velocity=-5.25,-4.7
		AirGuard.velocity=-2.5,-5
		ground.cornerpush.veloff = 0; -(fVar(11)*0.333)
		Air.cornerpush.veloff = 0; -(fVar(11)*0.333)
		mindist = 10,-25
		maxdist = 40,0
		ID=1150
		yaccel =.4
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 40 && p2dist X >= -2)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1150,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1150,end of State]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1200,連続そげぶ(下段派生2)]
	Type=S
	MoveType=A
	physics=N
;	velset=1,0
	Ctrl=0
;	faceP2=1
;	Anim=1200
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1200
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1200
value = 1200

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 1
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(3) < 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(3) < 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(3) < 0
time = 1
add = (128/5)*-animelemtime(3),(128/5)*-animelemtime(3),(256/5)*-animelemtime(3)

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(3)>=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(3)>=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 1200,v1=0]
		Type=varSet
		Trigger1=AnimElem = 1
		var(1) = var(1)

	[State 1200,vel]
		Type=velSet
		Trigger1=AnimElem=3
		x=4

	[State 1200,vel]
		Type=velSet
		Trigger1=AnimElem=5
		x=0

	[State 1200,Snd2]
		Type=playSnd
		Trigger1=AnimElem=6
		value=1,20
		channel=1

	[State 1200,Snd2]
		Type=playSnd
		Trigger1=AnimElem=13
		value=1,7
		channel=1

	[State 1200,Explod]
		Type=Explod
		Trigger1=AnimElem=4
		Anim=1201
		Pos=0,0
		PosType=P1
		bindTime=-1
		sprPriority=3
		Ownpal=1
		RemoveonGetHit=1
		Scale=const(Size.xScale),const(Size.yScale)
		trans=add
		PauseMoveTime = -1

	[State 1200,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(5)>=0
;		Trigger1=AnimElemTime(6)<0
		Attr=,SA
		AnimType=up
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=Low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(50/(fvar(0)-fvar(1))),9
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=45,16
		GivePower=31,16
		PauseTime=10,12
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=26
		Guard.SlideTime=27
		Guard.HitTime=22
		Ground.velocity=-1.75,-8.25
		Guard.velocity=-8
		Air.velocity=-5.25,-7.8
		AirGuard.velocity=-2.5,-5
		ground.cornerpush.veloff = 0; -(fVar(11)*0.444)
		Air.cornerpush.veloff = 0; -(fVar(11)*0.444)
		Yaccel=0.45
		fall=1
		fall.recover=0
		mindist = 10,-25
		maxdist = 40,0
		ID=1200
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 40 && p2dist X >= -2)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1200,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHit=1
		Trigger1=enemynear,StateType!=A
		Anim=6030
		PosType=P2
		Pos=-25,floor(-60*const(Size.yScale))
		sprPriority=0
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1200,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1200,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1250,連続そげぶ強1]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1250
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1250
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1250
value = 1250
elem = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = HitPauseTime && AnimElemTime(6) < 1
value = 1250
elem = ifelse(animelemno(-1)+MoveContactTrue < 7,animelemno(-1)+MoveContactTrue,6)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
var(6) = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, VarAdd]
type = VarSet
trigger1 = command = "a" || command = "b" || command = "c"
var(58) = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 1
var(58) = 0
	
[State 0, NotHitBy]
type = NotHitBy
triggerall = prevstateno = 1125
trigger1 = AnimElemTime(4) < 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
triggerall = prevstateno = 1125
trigger1 = AnimElemTime(4) < 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
triggerall = prevstateno = 1125
trigger1 = animelemtime(4) < 0
time = 1
add = (128/12)*-animelemtime(4),(128/12)*-animelemtime(4),(256/12)*-animelemtime(4)

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(4)>=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4)>=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 1250,v1=0]
		Type=varSet
		Trigger1=AnimElem = 1
		var(1) = var(1)

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 20

[State 0, VelSet]
type = VelSet
trigger1 = abs(vel X) < const(movement.stand.friction.threshold)
trigger2 = hitpausetime
x = 0
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = const(movement.stand.friction)

	[State 1250,Snd2]
		Type=playSnd
		Trigger1=AnimElem=4
		value=1,23
		channel=-1

	[State 1250,Snd2]
		Type=playSnd
		Trigger1=AnimElem=4
		value=2,7
		channel=4
 		ignorehitpause = 1

	[State 1250,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(6)>=0
;		Trigger1=AnimElemTime(8)<0
		Attr=,SA
		AnimType=hard
		Air.AnimType=back
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(50/(fvar(0)-fvar(1))),9
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=66,18
		GivePower=31,16
		PauseTime=16,16
		Ground.SlideTime=28
		Ground.HitTime=18
		Air.HitTime=10
		Guard.SlideTime=27
		Guard.HitTime=20
		Ground.velocity=-4
		Guard.velocity=-6
		Air.velocity=-4,-3.25
		AirGuard.velocity=-2.5,-0.5
		ground.cornerpush.veloff = 0;-fvar(11)*0.333
		Air.cornerpush.veloff = 0;-fvar(11)*0.333
		Air.fall=1
		fall.recover=0
		mindist = 10,-25
		maxdist = 40,0
		ID=1250
		Yaccel=0.4
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 70 && p2dist X >= 6 && p2dist Y >= -72)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1 && var(1)
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1251,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHitTrue=1
		Trigger1=enemynear,StateType!=A
		Anim=6035
		PosType=P1
		Pos=85,floor(-75*const(Size.yScale))
		facing = -1
		sprPriority=0
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1250,v1=1]
		Type=VarSet
		Trigger1=movehit=1
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1250,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1
;---------------------------------------------------------------------------
[Statedef 1251,連続そげぶ強2]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1251
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1251
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1251
value = 1251

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4) < 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(4) < 0
time = 1
add = (128/7)*-animelemtime(4),(128/7)*-animelemtime(4),(256/7)*-animelemtime(4)

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(4)>=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4)>=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, VarAdd]
type = VarSet
trigger1 = command = "a" || command = "b" || command = "c"
var(58) = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 1
var(58) = 0

	[State 1251,v1=0]
		Type=varSet
		Trigger1=AnimElem = 1
		var(1) = var(1)

	[State 1251,vel]
		Type=velSet
		Trigger1=AnimElemtime(1)=0
		x=1

	[State 1251,veladd]
		Type=velset
		Trigger1=AnimElemtime(4)=0
		x=8

	[State 1251,veladd]
		Type=velset
		Trigger1=AnimElemtime(6)=0
		x=0

	[State 1251,Snd2]
		Type=playSnd
		Trigger1=AnimElem=4
		value=1,23
		channel=-1

	[State 1251,Hitdef]
		Type=HitDef
		TriggerAll = Anim = 1251
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(6)>=0
;		Trigger1=AnimElemTime(7)<0
		Attr=,SA
		AnimType=hard
		Air.AnimType=back
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(50/(fvar(0)-fvar(1))),9
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=66,18
		GivePower=31,16
		PauseTime=16,20
		Ground.SlideTime=28
		Ground.HitTime=18
		Air.HitTime=10
		Guard.SlideTime=21
		Guard.HitTime=18
		Ground.velocity=-4
		Guard.velocity=-6
		Air.velocity=-4,-2.25
		AirGuard.velocity=-2.5,-0.5
		ground.cornerpush.veloff = 0;-(fvar(11)*0.333)
		Air.cornerpush.veloff = 0;-(fvar(11)*0.333)
		Air.fall=1
		fall.recover=0
		mindist = 10,-25
		maxdist = 40,0
		ID=1251
		Yaccel=0.4
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 76 && p2dist X >= -2 && p2dist Y >= -75)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1251,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHit=1
		Trigger1=enemynear,StateType!=A
		Anim=6035
		PosType=P2
		Pos=-30,floor(-15*const(Size.yScale))
		sprPriority=0
		persistent = 0
		IgnoreHitPause=1
		trans=add
		vfacing = -1
		PauseMoveTime = -1

	[State 1251,v1=1]
		Type=VarSet
		Trigger1=movehit
		var(1)=1
		ignorehitpause = 1

	[State 1251,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1252,連続そげぶ強3]
	Type=S
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1252
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1252
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1252
value = 1252

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElemTime(4) < 0
value = SCA,AP
time = 1
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4) < 0
value = SCA,AA,AP,AT
time = 1
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(4) < 0
time = 1
add = (128/10)*-animelemtime(4),(128/10)*-animelemtime(4),(256/10)*-animelemtime(4)

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(4)>=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(4)>=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 1252,v1=0]
		Type=varSet
		Trigger1=AnimElem = 1
		var(1) = var(1)

	[State 1252,vel]
		Type=velSet
		Trigger1=AnimElemtime(1)=0
		x=2.5

	[State 1252,veladd]
		Type=velset
		Trigger1=AnimElemtime(4)=0
		x=8

	[State 1252,veladd]
		Type=velset
		Trigger1=AnimElemtime(6)=0
		x=0

	[State 1252,Snd2]
		Type=playSnd
		Trigger1=AnimElem=4
		value=1,23
		channel=-1

	[State 1252,Hitdef]
		Type=HitDef
		TriggerAll = Anim = 1252
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(6)>=0
;		Trigger1=AnimElemTime(7)<0
;		Trigger1=enemynear,MoveType!=A || var(2) = 0
		Attr=,SA
		AnimType=back
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=Low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(74/(fvar(0)-fvar(1))),9
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=66,18
		GivePower=31,16
		PauseTime=16,16
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=26
		Guard.SlideTime=27
		Guard.HitTime=14
		Ground.velocity=-7.25,-4.5
		Guard.velocity=-6
		Air.velocity=-6.75,-4.75
		AirGuard.velocity=-2.5,-0.5
		fall=1
		fall.recover=0
		mindist = 10,-25
		maxdist = 40,0
		ID=1252
		Yaccel=0.4
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 75 && p2dist X >= -2 && p2dist Y >= -74)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = .2/fvar(0)
ignorehitpause = 1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1252,Hitdef]
		Type=Null;HitDef
		Trigger1=!MoveContact
		Trigger1=!MoveReversed
		Trigger1=AnimElemTime(6)>=0
		Trigger1=AnimElemTime(7)<0
		Trigger1=enemynear,MoveType=A || var(2) != 0
		Attr=S,SA
		AnimType=hard
		Air.AnimType=back
		Hitflag=MAF
		Guardflag=HA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,11
		GuardSound=S1,1
		Damage=Ceil(78/(fvar(0)-fvar(1))),9
		Priority=5,Hit
		GetPower=31,16
		GivePower=31,16
		PauseTime=16,16
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=24
		Guard.SlideTime=27
		Guard.HitTime=14
		Ground.velocity=-2.5
		Guard.velocity=-8
		Air.velocity=-5,-4.5
		AirGuard.velocity=-2.5,-5
		ground.cornerpush.veloff = 0;-(fvar(11)*0.444)
		Air.cornerpush.veloff = 0;-(fvar(11)*0.444)
		Yaccel=0.45
		Air.fall=1
		fall.recover=0
		ID=1252

	[State 1252,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHit=1
		Trigger1=enemynear,StateType!=A
		Anim=6030
		PosType=P2
		Pos=-20,floor(-60*const(Size.yScale))
		sprPriority=0
		persistent = 0
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1252,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHit=1
		Anim=27021
		PosType=P1
		Pos=68,floor(-55.5*const(Size.yScale))
		sprPriority=0
		scale = .25,.25
		persistent = 0
		ownpal = 1
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1252,画面端対策]
		type = Width
		trigger1 = movehit
		value = 12,0
 		ignorehitpause = 1

	[State 1252,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 1252,End]
		Type=ChangeState
		Trigger1=AnimTime=0
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
;昇竜そげぶ
;---------------------------------------------------------------------------
[Statedef 1500,昇竜そげぶ弱]
	Type=U
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1500
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1500
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1500 && Anim != 1501
value = 1500

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1500 && animelemtime(5) < 1 && movecontact && hitpausetime
value = 1501
elem = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = Anim = 1500 && animelem = 1
var(6) = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = Anim = 1500 && AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=Anim = 1500 && AnimElem = 1
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1500 && animelem = 5
x = 4
y = const(velocity.jump.y)

[State 50, 重力付加]
type = VelAdd
trigger1 = anim = 1500 && animelemtime(5) > 0
y = ifelse(-vel Y/6 <= .5,.5,-vel Y/6)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1501 || animelemtime(5) < 0
statetype = S
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1500 && animelemtime(5) >= 0
statetype = A
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Anim = 1500 && AnimElem = 1
value = SCA,AP
time = 3
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = Anim = 1500 && AnimElem = 1
value = SCA,AA,AP,AT
time = 3
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = Anim = 1500 && animelemtime(3) < 0
time = 1
add = (128/3)*-animelemtime(3),(128/3)*-animelemtime(3),(256/3)*-animelemtime(3)

[State 0, HitOverride]
type = HitOverride
trigger1 = Anim = 1500 && AnimElemTime(3)>=0&&AnimElemTime(8)<=0
trigger2 = anim = 1501
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = Anim = 1500 && AnimElemTime(3)>=0&&AnimElemTime(8)<=0
trigger2 = anim = 1501
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 52,画面端対策]
		type = Width
		Trigger1=anim = 1500 && AnimElemTime(3) = -1
		player = 40,0

	[State 52,画面端対策]
		type = Width
		Trigger1=anim = 1500 && AnimElemTime(4) = -1
		player = 20,0

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1500 && AnimElem = 3
x = 18

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 1501
x = 0
y = 0

[State 0, VelMul]
type = VelMul
trigger1 = statetype != A
x = const(movement.stand.friction)

;[State 0, PosAdd]
;type = PosAdd
;trigger1 = anim = 1500 && animelem = 3
;x = 40
;
;[State 0, PosAdd]
;type = PosAdd
;trigger1 = anim = 1500 && animelem = 4
;x = 20

	[State 1500,v1=0]
		Type=varSet
		Trigger1=anim = 1500 && AnimElem = 1
		var(1) = var(1)

	[State 1500,Snd1]
		Type=playSnd
		Trigger1=anim = 1500 && AnimElem = 1
		value=2,1
		channel=4

	[State 1500,Snd2]
		Type=playSnd
		Trigger1=anim = 1500 && AnimElem = 4
		value=1,12
		channel=1

	[State 1500,Hitdef]
		Type=HitDef
		Trigger1=anim = 1500 && animelem = 4
		Attr=,SA
		AnimType=up
		Hitflag=MAF
		Guardflag=M
		Ground.Type=High
		SparkNo=S6005;(IfElse(hitcount<1, -1,6005))
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(85/(fvar(0)-fvar(1))),2
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=30,10
		GivePower=15,5
		PauseTime=5,10
		Guard.PauseTime = 10,5
		HelperPauseTime = 0,0
		Ground.SlideTime=28
		Guard.SlideTime=24
		Ground.HitTime=26
		Guard.HitTime=24
		Guard.CtrlTime=24
		Air.HitTime=24
		Ground.velocity=-2,-7.8
		Air.velocity=-2,-7.8
		Guard.velocity=-8
		AirGuard.velocity=-2.5,-5
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-10
		Air.cornerpush.veloff = 0
		AirGuard.cornerpush.veloff = 0
		Yaccel=0.45
		fall=1
		fall.recover=0
		id = 1500
		snap = 25,(-90-enemynear,const(size.head.pos.y))*(enemynear,const(size.head.pos.y) > -90)
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 54 && p2dist X >= -3 && p2dist Y >= -106)

	[State 1500,Hitdef]
		Type=Null;HitDef
		Trigger1=animelem = 5
		Attr=,SA
		AnimType=up
		Hitflag=MAF
		Guardflag=M
		Ground.Type=High
		SparkNo=-1;S(IfElse(hitcount<1, -1,6005));6005
		Guard.SparkNo=-1;S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=-1;S0,12
		GuardSound=-1;S1,1
		Damage=Ceil(85/(fvar(0)-fvar(1))),2
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=30,10
		GivePower=15,5
		PauseTime=10,10
		Ground.SlideTime=28
		Guard.SlideTime=24
		Ground.HitTime=26
		Guard.HitTime=24
		Guard.CtrlTime=24
		Air.HitTime=24
		Ground.velocity=-2,-7
		Air.velocity=-2,-7
		Guard.velocity=-8
		AirGuard.velocity=-2.5,-5
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-10
		Air.cornerpush.veloff = 0
		AirGuard.cornerpush.veloff = 0
		Yaccel=0.45
		fall=1
		fall.recover=0
		mindist = 25,-90-enemynear,const(size.head.pos.y)
		maxdist = 25,-90-enemynear,const(size.head.pos.y)
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 40 && p2dist X >= -2)

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1500,位置固定]
		type = Null;TargetBind
		trigger1 = movehit = 1
		time = 1
		pos = 25,-90-enemynear,const(size.head.pos.y)
		ignorehitpause = 1
		persistent = 0

	[State 1500,Hit Spark]
		Type=Null;Explod
		trigger1 = MoveHit = 1 && HitPauseTime = 5
		Anim=6005
		PosType=P1
		pos = 25,floor(-60*const(Size.yScale))
		sprPriority=9999
		IgnoreHitPause=1
		PauseMoveTime = -1

	[State 1500,Hit Spark]
		Type=Explod
		trigger1 = MoveHit = 1 && HitPauseTime = 5
		Anim=27021
		PosType=P1
		pos = 27,floor(-107*const(Size.yScale))
		angle = 90
		scale = .5,.5
		ownpal = 1
		sprPriority=0
		IgnoreHitPause=1
		PauseMoveTime = -1

[State 0, PlaySnd]
type = Null;PlaySnd
trigger1 = movehit = 1 || moveguarded = 1
value = S(ifelse(moveguarded,1,0)),ifelse(moveguarded,1,12)
ignorehitpause = 1
persistent = 0

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1500,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = Anim = 1501 && !AnimTime
var(59) = 0

	[State 1500,land]
		Type=ChangeState
		Trigger1= Anim = 1501 && !AnimTime
		value = 0
		ctrl = 1

	[State 1500,land]
		Type=ChangeState
		trigger1 = StateType = A && vel Y > 0 && pos Y >= 0
		value = 53

;---------------------------------------------------------------------------
[Statedef 1550,昇竜そげぶ強]
	Type=U
	MoveType=A
	physics=N
;	velset=0,0
	Ctrl=0
;	faceP2=1
;	Anim=1550
;	Poweradd=FVar(11)
	sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1550
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1550 && Anim != 1551
value = 1550

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1550 && AnimElemTime(4) < 0 && moveclash
value = 1550
elem = 4

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1550 && animelemtime(6) < 1 && (movehit || moveguarded || moveclashed) && hitpausetime
value = 1551
elem = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 1550 && animelem = 1
var(6) = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1550 && animelem = 6
x = 2
y = const(velocity.jump.y)

[State 50, 重力付加]
type = VelAdd
trigger1 = anim = 1550 && animelemtime(6) > 0
y = ifelse(-vel Y/6 <= .5,.5,-vel Y/6)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1551 || animelemtime(6) < 0
statetype = S
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1550 && animelemtime(6) >= 0
statetype = A
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = anim = 1550 && animelem = 6
x = 38

[State 0, Turn]
type = Turn
triggerall = anim = 1550
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = Anim = 1551 || AnimElemTime(9) < 0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = Anim = 1551 || AnimElemTime(9) < 0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))


	[State 52,画面端対策]
		type = Width
		triggerall = anim = 1550
		Trigger1=AnimElemTime(6) < -1
		edge = 61,0
		player = 35,0

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 1550
trigger1 = animelem = 4
x = 15

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 1550
trigger1 = animelemtime(5) <= 0
value = SCA,AA,AT
time = 1
dodge = 1
ignoreproj = 1
ignorehelper = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 1550
trigger1 = animelemtime(4) < 0
value = SCA,AA,AP,AT
time = 1
dodge = 1
ignoreproj = -1
ignorehelper = -1
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = anim = 1550
trigger1 = animelemtime(5) <= 0
time = 1
add = (256/19)*-(animelemtime(5)-1),(ifelse(animelemtime(4) < 0,256,192)/19)*-(animelemtime(5)-1),(ifelse(animelemtime(4) < 0,256,128)/19)*-(animelemtime(5)-1)

[State 0, VarSet]
type = VarSet
triggerall = anim = 1550
trigger1 = AnimElem = 1
var(0) = random%2

	[State 1500,v1=0]
		Type=varSet
triggerall = anim = 1550
		Trigger1=AnimElem = 1
		var(1) = var(1)

	[State 1500,Snd1]
		Type=playSnd
triggerall = anim = 1550
		Trigger1=AnimElem = 1
		value=ifelse(var(0),3,2),ifelse(var(0),12,3)
		channel=4

	[State 1500,Snd2]
		Type=playSnd
triggerall = anim = 1550
		Trigger1=AnimElem = 5
		value=1,12
		channel=1

	[State 1500,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1 && (anim = 1551 || animelemtime(6) < 0)
		Attr=,SA
		AnimType=up
		Hitflag=MAF
		Guardflag=M
		Ground.Type=High
		SparkNo=S6005
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(105/(fvar(0)-fvar(1))),16
		Priority=ifelse(MoveClash,999,7),Hit
HelperPriority = -99,Miss
		GetPower=42,14
		GivePower=15,5
		PauseTime=18,18
		Guard.PauseTime = 15,5
		HelperPauseTime = 0,0
		Ground.SlideTime=28
		Guard.SlideTime=24
		Ground.HitTime=26
		Guard.HitTime=24
		Guard.CtrlTime=13
		Air.HitTime=24
		Ground.velocity=-1,-9.3
		Air.velocity=-1,-9.3
		Guard.velocity=-8
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-10
		Air.cornerpush.veloff = 0
		AirGuard.cornerpush.veloff = 0
		Yaccel=0.45
		fall=1
		fall.recover=0
		id = 1550
		snap = 60,(-109-enemynear,const(size.head.pos.y))*(enemynear,const(size.head.pos.y) > -109)
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) + 35 <= 78 && p2dist X >= 32 && p2dist Y >= -117)

	[State 1500,Hitdef]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1 && anim = 1550 && animelemtime(6) >= 0
		Attr=,SA
		AnimType=up
		Hitflag=MAF
		Guardflag=M
		Ground.Type=High
		SparkNo=S6005
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(47/(fvar(0)-fvar(1))),5
		Priority=ifelse(MoveClash,999,7),Hit
HelperPriority = -99,Miss
		GetPower=42,14
		GivePower=15,5
		PauseTime=10,10
		Guard.PauseTime = 15,5
		HelperPauseTime = 0,0
		Ground.SlideTime=28
		Guard.SlideTime=24
		Ground.HitTime=26
		Guard.HitTime=24
		Guard.CtrlTime=13
		Air.HitTime=24
		Ground.velocity=-1,ifelse(vel Y/2 < -5.1,vel Y/2,-5.1)
		Air.velocity=-1,ifelse(vel Y/2 < -5.1,vel Y/2,-5.1)
		Guard.velocity=-8
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-10
		Air.cornerpush.veloff = 0
		AirGuard.cornerpush.veloff = 0
		Yaccel=0.45
		fall=1
		fall.recover=0
		id = 1550
		snap = 22,(-109-enemynear,const(size.head.pos.y))*(enemynear,const(size.head.pos.y) > -109)
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) + 35 <= 28 && p2dist X >= -18 && p2dist Y >= -128)

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHitTrue = 1
fvar(0) = ifelse(var(1),.1,ifelse(anim = 1551,1.88,1.11))
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = !MoveClash && !MoveClashed
attr = ,AA,AT
slot = 1
time = 1
forceair = 0
hitsound = S901,random%2
sparkno = S7002
pausetime = 10,13
ignorehitpause = 1
clashpriority = 7
nothitstate = 1
hotype = 2

[State 0, Zoom]
type = Zoom
triggerall = !winko
trigger1 = anim = 1551 && movehit && hitpausetime
pos = -(hitpausetime%2)*facing,-hitpausetime*2
scale = camerazoom
ignorehitpause = 1

[State 0, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = anim = 1551 && movehit && hitpausetime
text = "Y = %f"
params = -sin((pi/180)+(hitpausetime*10*(pi/180)))*18
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
Trigger1=anim = 1550 && animelemtime(6) >= 0
trigger1 = MoveHit = 1
x = -2
y = ifelse((-vel Y*.75) > 2,-vel Y*.75,2)

	[State 1500,Hitdef]
		Type=Null;HitDef
		Trigger1=animelem = 5
		Attr=,SA
		AnimType=up
		Hitflag=MAF
		Guardflag=M
		Ground.Type=High
		SparkNo=-1;S(IfElse(hitcount<1, -1,6005));6005
		Guard.SparkNo=-1;S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=-1;S0,12
		GuardSound=-1;S1,1
		Damage=Ceil(85),2
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=30,10
		GivePower=15,5
		PauseTime=10,10
		Ground.SlideTime=28
		Guard.SlideTime=24
		Ground.HitTime=26
		Guard.HitTime=24
		Guard.CtrlTime=24
		Air.HitTime=24
		Ground.velocity=-2,-7
		Air.velocity=-2,-7
		Guard.velocity=-8
		AirGuard.velocity=-2.5,-5
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-10
		Air.cornerpush.veloff = 0
		AirGuard.cornerpush.veloff = 0
		Yaccel=0.45
		fall=1
		fall.recover=0
		mindist = 25,-90-enemynear,const(size.head.pos.y)
		maxdist = 25,-90-enemynear,const(size.head.pos.y)
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 40 && p2dist X >= -2)

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1500,位置固定]
		type = Null;TargetBind
		trigger1 = movehit = 1
		time = 1
		pos = 25,-90-enemynear,const(size.head.pos.y)
		ignorehitpause = 1
		persistent = 0

	[State 1500,Hit Spark]
		Type=Null;Explod
		trigger1 = MoveHit = 1
		Anim=6005
		PosType=P1
		pos = 60,floor(-60*const(Size.yScale))
		sprPriority=9999
		IgnoreHitPause=1
		PauseMoveTime = -1
		Persistent = 0

	[State 1500,Hit Spark]
		Type=Explod
		triggerall = anim = 1551
		trigger1 = MoveHit = 1 && HitPauseTime = 18
		Anim=27021
		PosType=P1
		pos = 62,floor(-117*const(Size.yScale))
		angle = 90
		scale = .5,.5
		ownpal = 1
		sprPriority=0
		IgnoreHitPause=1
		PauseMoveTime = -1
		Persistent = 0

[State 0, PlaySnd]
type = Null;PlaySnd
trigger1 = movehit = 1 || moveguarded = 1
value = S(ifelse(moveguarded,1,0)),ifelse(moveguarded,1,12)
ignorehitpause = 1
persistent = 0

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1500,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = Anim = 1551 && !AnimTime
var(59) = 0

	[State 1500,land]
		Type=ChangeState
		trigger1 = Anim = 1551 && !AnimTime
		value = 0
		ctrl = 1

	[State 1500,land]
		Type=ChangeState
		trigger1 = StateType = A && vel Y > 0 && pos Y >= 0
		value = 53

;---------------------------------------------------------------------------
;突撃そげぶ
;---------------------------------------------------------------------------
[Statedef 1600,突撃そげぶ弱]
	Type=S
	MoveType=A
	physics=N
;	Anim=1600
	Ctrl=0
;	velset=0,0
;	Poweradd=FVar(11)
	sprPriority=1
;	faceP2=1
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1600
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1600 && animelemtime(7) < 0 && (MoveHit || MoveGuarded || MoveClash || MoveClashed) && hitpausetime = 1
value = 1600
elem = 7
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1600 && animelemtime(5) < 1 && hitpausetime
value = 1600
elem = 5
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = hitpausetime = 1
sysvar(51) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1600
value = 1600

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
var(6) = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 1
value = SCA,AP
time = 4
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElem = 1
value = SCA,AA,AP,AT
time = 4
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(3) < 0
time = 1
add = (128/4)*-animelemtime(3),(128/4)*-animelemtime(3),(256/4)*-animelemtime(3)

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(3)>=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(3)>=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 1600,v1=0]
		Type=varSet
		Trigger1=AnimElem = 1
		var(1) = var(1)

	[State 1600,vel]
		Type=velset
		Trigger1=AnimElem=4
		x=15

	[State 1600,veladd]
		Type=velset
		Trigger1=AnimElem=7
		x=5
ignorehitpause = 1

	[State 1600,veladd]
		Type=velset
		Trigger1=AnimElem=8
		x=1

	[State 1600,veladd]
		Type=velset
		Trigger1=AnimElem=10
		x=0

	[State 1600,Snd1]
		Type=playSnd
		Trigger1=AnimElem=1
		value=3,12
		channel=4

	[State 1600,Snd2]
		Type=playSnd
		Trigger1=AnimElem=4
		value=1,10
		channel=-1

	[State 1600,Explod]
		Type=Null;Explod
		Trigger1=AnimElem=4
		Anim=1091
		sprPriority=3
		Pos=floor(55*const(Size.xScale)),floor(-65*const(Size.yScale))
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=3
		IgnoreHitPause=0
		trans=add
		PauseMoveTime = -1

	[State 1600,Hitdef_!=A]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
		Trigger1=enemynear,MoveType!=A || var(2) = 0
		Attr=,SA
		AnimType=back
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=Low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,-60*const(Size.yScale)
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(53/(fvar(0)-fvar(1))),9
		PauseTime=15,14
		HelperPauseTime = 0,0
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=75,31
		GivePower=62,31
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=24
		Guard.SlideTime=12
		Guard.HitTime=10
		Ground.velocity=-7.5,-4.5
		Guard.velocity=-12
		Air.velocity=-7.5,-4.5
		AirGuard.velocity=-2.5,-4
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-18
		ground.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.8)
		Air.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.8)
		Yaccel=0.45
		fall=1
		fall.recover=0
		mindist = 62,-20
		maxdist = 70,0
		ID=1600
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 74 && p2dist X >= -6 && p2dist Y >= -87)

	[State 1600,Hitdef_=A]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
		Trigger1=enemynear,MoveType=A || var(2) != 0
		Attr=,SA
		AnimType=back
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,-60*const(Size.yScale)
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(95/(fvar(0)-fvar(1))),9
		PauseTime=17,16
		HelperPauseTime = 0,0
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=62,31
		GivePower=62,31
		Ground.SlideTime=28
		Ground.HitTime=36
		Air.HitTime=24
		Guard.SlideTime=26
		Guard.HitTime=24
		Ground.velocity=-7.5,-4.5
		Guard.velocity=-12
		Air.velocity=-7.5,-4.25
		AirGuard.velocity=-2.5,-4.25
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-18
		ground.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.8)
		Air.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.8)
		Yaccel=0.45
		fall=1
		fall.recover=0
		mindist = 62,-20
		maxdist = 70,0
		ID=1600
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 74 && p2dist X >= -6 && p2dist Y >= -87)

[State 0, HitOverride]
type = HitOverride
trigger1 = !MoveClash && !MoveClashed
attr = ,AA
slot = 1
time = 1
forceair = 0
hitsound = S901,random%2
sparkno = S7002
pausetime = 16,16
ignorehitpause = 1
clashpriority = 7
nothitstate = 1
hotype = 2

[State 0, EnvShake]
type = EnvShake
trigger1 = movehit && hitpausetime = 14
time = 14
freq = 180
ampl = -1
phase = 90
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = movehit && hitpausetime = 16
time = 16
freq = 180
ampl = -1
phase = 90
ignorehitpause = 1

[State 0, Zoom]
type = Zoom
triggerall = !winko
trigger1 = movehit && hitpausetime
pos = hitpausetime*facing,0
scale = camerazoom
ignorehitpause = 1

	[State 1500,Hit Spark]
		Type=Explod
		trigger1 = MoveHit = 1 && HitPauseTime = 14
		Anim=27021
		PosType=P1
		pos = 100,-63.5*const(Size.yScale)
		scale = .5,.5
		ownpal = 1
		sprPriority=0
		IgnoreHitPause=1
		PauseMoveTime = -1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1600,2nd Hit Spark]
		Type=Explod
		trigger1 = MoveHit = 1 && HitPauseTime = 14
		Anim=6030
		PosType=P2
		Pos=-25,floor(-60*const(Size.yScale))
		sprPriority=0
		trans=add
		persistent = 0
		IgnoreHitPause=1
		PauseMoveTime = -1

	[State 1600,AttackDist]
		Type=AttackDist
		TriggerAll=!IsHelper
		Trigger1=AnimElem=8,>=0
		Trigger2=MoveContact
		Trigger3=MoveReversed
		value=0
		IgnoreHitPause=1

	[State 1600,idle]
		Type=StateTypeSet
		Trigger1=AnimElem=8
		MoveType=I

	[State 1600,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 0, VarSet]
		type = VarSet
		Trigger1=AnimElemTime(12)>=-1
		var(59) = 0

	[State 1600,ChangeState]
		Type=ChangeState
		Trigger1=AnimElemTime(12)>=-1
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
[Statedef 1650,突撃そげぶ強]
	Type=S
	MoveType=A
	physics=N
;	Anim=1650
	Ctrl=0
;	velSet=0,0
;	Poweradd=FVar(11)
	sprPriority=1
;	faceP2=1
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(59) = 1650
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1650 && animelemtime(9) < 0 && (MoveHit || MoveGuarded || MoveClash || MoveClashed) && hitpausetime = 1
value = 1650
elem = 9
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1650 && animelemtime(6) < 1 && hitpausetime
value = 1650
elem = 6
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = hitpausetime = 1
sysvar(51) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1650
value = 1650

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
var(6) = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 4
value = SCA,AP
time = 8
ignoreproj = -1
ignorehelper = -1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, NotHitBy]
type = NotHitBy
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElem = 4
value = SCA,AA,AP,AT
time = 8
ignoreproj = -1
ignorehelper = -1

[State 0, PalFX]
type = PalFX
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
time = 1
add = (128/8)*-animelemtime(5),(128/8)*-animelemtime(5),(256/8)*-animelemtime(5)

[State 0, HitOverride]
type = HitOverride
trigger1 = AnimElemTime(5)>=0
attr = ,AP
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = AnimElemTime(5)>=0
attr = ,AA,AP,AT
slot = 0
stateno = 8001
time = 1
forceair = 0
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

	[State 1650,v1=0]
		Type=varSet
		Trigger1=AnimElem = 1
		var(1) = var(1)

	[State 1650,vel]
		Type=velSet
		Trigger1=AnimElem=6,<0
		x=0

	[State 1650,vel]
		Type=velAdd
		Trigger1=AnimElem=6
		x=15

	[State 1650,veladd]
		Type=velSet
		Trigger1=AnimElem=8
		x=12

	[State 1650,veladd]
		Type=velSet
		Trigger1=AnimElem=9
		x=7
ignorehitpause = 1

	[State 1650,veladd]
		Type=velSet
		Trigger1=AnimElemtime(10)=0
		x=2

	[State 1650,veladd]
		Type=velSet
		Trigger1=AnimElemtime(11)=0
		x=.5

	[State 1650,veladd]
		Type=velSet
		Trigger1=AnimElemtime(12)=0
		x=0

	[State 1650,Snd1]
		Type=playSnd
		Trigger1=AnimElem=2
		value=3,10
		channel=4

	[State 1650,Snd2]
		Type=playSnd
		Trigger1=AnimElem=6
		value=1,10
		channel=-1

	[State 1650,Explod]
		Type=Null;Explod
		Trigger1=AnimElem=6
		Anim=1091
		sprPriority=3
		Pos=floor(55*const(Size.xScale)),floor(-65*const(Size.yScale))
		PosType=P1
		bindTime=-1
		Scale=const(Size.xScale),const(Size.yScale)
		RemoveonGetHit=3
		IgnoreHitPause=0
		trans=add
		PauseMoveTime = -1

	[State 1650,Hitdef_!=A]
		Type=HitDef
		Trigger1=!MoveContact && !MoveReversed && clsn1
;		Trigger1=!MoveReversed
;		Trigger1=AnimElemTime(6)>=0
;		Trigger1=AnimElemTime(10)<0
;		Trigger1=enemynear,MoveType!=A || var(2) = 0
		Attr=,SA
		AnimType=hard
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,-60*const(Size.yScale)
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(70/(fvar(0)-fvar(1))),12
		Priority=7,Hit
HelperPriority = -99,Miss
		GetPower=75,31
		GivePower=62,31
		PauseTime=17,16
		HelperPauseTime = 0,0
		Ground.SlideTime=28
		Ground.HitTime=30
		Air.HitTime=24
		Guard.SlideTime=26
		Guard.HitTime=24
		Ground.velocity=-7,-4.5
		Guard.velocity=-12
		Air.velocity=-8,-4.5
		AirGuard.velocity=-2.5,-4
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-18
		ground.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.8)
		Air.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.8)
		Yaccel=0.35
		fall=1
		fall.recover=0
		mindist = 62,-20
		maxdist = 70,0
		ID=1650
		abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
		nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
		nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 74 && p2dist X >= -6 && p2dist Y >= -87)

[State 0, HitOverride]
type = HitOverride
trigger1 = !MoveClash && !MoveClashed
attr = ,AA
slot = 1
time = 1
forceair = 0
hitsound = S901,random%2
sparkno = S7002
pausetime = 16,16
ignorehitpause = 1
clashpriority = 7
nothitstate = 1
hotype = 2

[State 0, EnvShake]
type = EnvShake
trigger1 = movehit && hitpausetime = 16
time = 16
freq = 180
ampl = -1
phase = 90
ignorehitpause = 1

[State 0, Zoom]
type = Zoom
triggerall = !winko
trigger1 = movehit && hitpausetime
pos = hitpausetime*facing,0
scale = camerazoom
ignorehitpause = 1

	[State 1500,Hit Spark]
		Type=Explod
		trigger1 = MoveHit = 1 && HitPauseTime = 16
		Anim=27021
		PosType=P1
		pos = 100,-63.5*const(Size.yScale)
		scale = .5,.5
		ownpal = 1
		sprPriority=0
		IgnoreHitPause=1
		PauseMoveTime = -1

	[State 0, VarSet]
		type = TargetVarSet
		trigger1 = numtarget = 1 && target,life - target,gethitvar(damage) <= 0
		sysvar(56) = 4
		ignorehitpause = 1

	[State 1650,Hitdef_=A]
		Type=Null;HitDef
		Trigger1=!MoveContact
		Trigger1=!MoveReversed
		Trigger1=AnimElemTime(6)>=0
		Trigger1=AnimElemTime(10)<0
		Trigger1=enemynear,MoveType=A ||  var(2) != 0
		Attr=A,SA
		AnimType=hard
		Hitflag=MAF
		Guardflag=MA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-60*const(Size.yScale))
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(115/(fvar(0)-fvar(1))),12
		Priority=5,Hit
		GetPower=75,31
		GivePower=62,31
		PauseTime=16,16
		Ground.SlideTime=28
		Ground.HitTime=38
		Air.HitTime=24
		Guard.SlideTime=12
		Guard.HitTime=10
		Ground.velocity=-0.75
		Guard.velocity=-6
		Air.velocity=-8,-5.5
		AirGuard.velocity=-2.5,-5
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-18
		ground.cornerpush.veloff = 0;-(fvar(11)*0.666)
		Air.cornerpush.veloff = 0;-(fvar(11)*0.666)
		Yaccel=0.35
		fall=1
		fall.recover=0
		ID=1650

	[State -1,汎用初期化]
		type = Null;Varset
		trigger1 = numTarget(1650)
		trigger1 = Target(1650),statetype = A
		trigger1 = movehit = 1
		var(10)= abs(Target(1650),pos x - pos x )
		persistent = 0
 		ignorehitpause = 1

	[State 2000,位置固定]
		type = Null;TargetBind
		trigger1 = numTarget(1650)
		trigger1 = Target(1650),statetype = A
		trigger1 = movehit = 1
		time = 1
		pos = var(10)+10,-10
		persistent = 0

	[State 1650,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHit=1
		Trigger1=enemynear,StateType!=A
		Anim=6030
		PosType=P2
		Pos=-25,floor(-60*const(Size.yScale))
		sprPriority=0
		persistent = 0
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1650,AttackDist]
		Type=AttackDist
		TriggerAll=!IsHelper
		Trigger1=AnimElem=10,>=0
		Trigger2=MoveContact
		Trigger3=MoveReversed
		value=0
		IgnoreHitPause=1

	[State 1650,idle]
		Type=StateTypeSet
		Trigger1=AnimElem=10,>=0
		MoveType=I

	[State 1650,v1=1]
		Type=VarSet
		Trigger1=movehit || moveguarded
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 0, VarSet]
		type = VarSet
		Trigger1=AnimElemTime(14)>=-1
		var(59) = 0

	[State 1650,ChangeState]
		Type=ChangeState
		Trigger1=AnimElemTime(14)>=-1
		value=0
		Ctrl=1

;---------------------------------------------------------------------------
;不幸だ☆
;---------------------------------------------------------------------------
[Statedef 1700,不幸だ☆弱]
	Type=A
	MoveType=A
	physics=N
	velset=0,0
	Ctrl=0
	Anim=1700
;	Poweradd=FVar(11)
	sprPriority=2

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(6) = 0
ignorehitpause = 1

	[State 1700,v1=0]
		Type=varSet
		Trigger1=Time=0
		var(1) = var(1)

	[State 1700,Snd1]
		Type=playSnd
		TriggerAll = Anim = 1700
		Trigger1=AnimElem=1
		value=3,13
		channel = 4

	[State 1700,Snd2]
		Type=playSnd
		TriggerAll = Anim = 1700
		Trigger1=AnimElem=1
		value=1,24
		channel=1
		volume=-200

	[State 1700,vel]
		Type=velSet
		TriggerAll = Anim = 1700
		Trigger1=AnimElem=3
		x=4.25
		y=8.00

	[State 1700,Hitdef]
		Type=HitDef
		TriggerAll = !MoveClash
		TriggerAll = anim = 1700
		Trigger1=!MoveContact
		Trigger1=!MoveReversed
		Trigger1=AnimElemTime(3)>=0
		Attr=S,SA
;		AnimType=down
		HitFlag = MAFD
		Guardflag=HA
		Ground.Type=Low
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-40*const(Size.yScale))
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(83/(fvar(0)-fvar(1))),8
		Priority=2,Hit
		GetPower=87,20
		GivePower=69,20
		PauseTime=12,12
		Guard.PauseTime = 12,9
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=24
		Guard.SlideTime=22
		Guard.HitTime=16
		Ground.velocity=-3,0
		Guard.velocity=-12
		Air.velocity=-5.5,5.75
		AirGuard.velocity=-2.5,5.25
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-18
		ground.cornerpush.veloff = 0;-(fvar(11)*0.666)
		Air.cornerpush.veloff = 0;-(fvar(11)*0.666)
		Yaccel=0.4
		Air.fall=1
		fall.recover=0
ID = 1700

[State 0, HitOverride]
type = HitOverride
trigger1 = !MoveClash && !MoveClashed
attr = ,AA
slot = 1
time = 1
forceair = 0
hitsound = S901,random%2
sparkno = S7002
pausetime = 16,16
ignorehitpause = 1
clashpriority = 2
nothitstate = 1
hotype = 2

[State 50, Gravity]
type = VelAdd
trigger1 = anim = 43
y = ifelse(-vel Y/6 <= .5,.5,-vel Y/6)

[State 0, VelSet]
type = VelSet
trigger1 = hitpausetime = 12
x = -2
y = -4
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 43
trigger1 = vel X = -2 && vel Y = -4
value = 43
elem = 5

[State 0, VelSet]
type = ChangeState
trigger1 = anim = 43 && animelem = 15
value = 50
ctrl = 0

	[State 1700,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHit=1
		Trigger1=enemynear,StateType!=A
		Anim=6030
		PosType=P2
		Pos=-25,floor(-60*const(Size.yScale))
		sprPriority=0
		persistent = 0
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1700,v1=0]
		Type=varSet
		Trigger1=MoveHit
		var(1)=1

	[State 52,0];?
		type = Width
		Trigger1=Pos Y>=0
		value = 38,38

	[State 1700,land]
		Type=ChangeState
		Trigger1=Pos Y>=0
		value=53

;---------------------------------------------------------------------------
[Statedef 1750,不幸だ☆強]
	Type=A
	MoveType=A
	physics=N
	velset=0,0
	Ctrl=0
	Anim=1700
;	Poweradd=FVar(11)
	sprPriority=2

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(6) = 0
ignorehitpause = 1

	[State 1750,v1=0]
		Type=varSet
		Trigger1=Time=0
		var(1) = var(1)

	[State 1750,Snd1]
		Type=playSnd
		Trigger1=AnimElem=1
		value=3,14
		channel = 4

	[State 1750,Snd2]
		Type=playSnd
		Trigger1=AnimElem=1
		value=1,24
		channel=1

	[State 1750,vel]
		Type=velSet
		Trigger1=AnimElem=3
		x=7.25
		y=4.75

	[State 1750,Hitdef]
		Type=HitDef
		TriggerAll = !MoveClash
		Trigger1=!MoveContact&&!MoveReversed
		Trigger1=AnimElemTime(3)>=0
		Attr=S,SA
;		AnimType=down
		HitFlag = MAFD
		Guardflag=HA
		Ground.Type=high
		SparkNo=S6015
		Guard.SparkNo=S6105
		Sparkxy=-15,floor(-40*const(Size.yScale))
		HitSound=S0,12
		GuardSound=S1,1
		Damage=Ceil(92/(fvar(0)-fvar(1))),9
		Priority=2,Hit
		GetPower=87,20
		GivePower=69,20
		PauseTime=12,12
		Guard.PauseTime = 12,9
		Ground.SlideTime=28
		Ground.HitTime=26
		Air.HitTime=24
		Guard.SlideTime=17
		Guard.HitTime=8
		Ground.velocity=-5,-5
		Guard.velocity=-12
		Air.velocity=-5.5,5.75
		AirGuard.velocity=-2.5,5
		Ground.cornerpush.veloff = 0
		Guard.cornerpush.veloff = 0;-18
		ground.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.35)
		Air.cornerpush.veloff = 0;ifelse(fvar(11)<=10,-3.5,-(fvar(11))*0.35)
		Yaccel=0.4
		fall=1
		Air.fall=1
		fall.recover=0
		id = 1750

[State 0, HitOverride]
type = HitOverride
trigger1 = !MoveClash && !MoveClashed
attr = ,AA
slot = 1
time = 1
forceair = 0
hitsound = S901,random%2
sparkno = S7002
pausetime = 16,16
ignorehitpause = 1
clashpriority = 2
nothitstate = 1
hotype = 2

[State 50, Gravity]
type = VelAdd
trigger1 = anim = 43
y = ifelse(-vel Y/6 <= .5,.5,-vel Y/6)

[State 0, VelSet]
type = VelSet
trigger1 = hitpausetime = 12
x = -2
y = -4
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 43
trigger1 = vel X = -2 && vel Y = -4
value = 43
elem = 5

[State 0, VelSet]
type = ChangeState
trigger1 = anim = 43 && animelem = 15
value = 50
ctrl = 0

	[State 1750,2nd Hit Spark]
		Type=Explod
		Trigger1=MoveHit=1
		Trigger1=enemynear,StateType!=A
		Anim=6030
		PosType=P2
		Pos=-25,floor(-60*const(Size.yScale))
		sprPriority=0
		persistent = 0
		IgnoreHitPause=1
		trans=add
		PauseMoveTime = -1

	[State 1700,v1=0]
		Type=varSet
		Trigger1=MoveHit
		var(1)=1
		persistent = 0
 		ignorehitpause = 1

	[State 52,0];?
		type = Width
		Trigger1=Pos Y<0
		value = 24,0

	[State 1750,land]
		Type=ChangeState
		Trigger1=Pos Y>=0
		value=53

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;そげぶ投げ始動
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Statedef 1800]
Type=S
MoveType=A
PhySics=S
;velset=0,0
Ctrl=0
;Anim=1800
Poweradd=0
sprPriority=2
movehitpersist = (prevstateno = 8001)
hitdefpersist = (prevstateno = 8001)
hitcountpersist = (prevstateno = 8001)

[State 0, VarSet]
type = VarSet
trigger1 = 1
sysvar(4) = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 1800
value = 1800

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
var(6) = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 1
trigger1 = p2dist X < 0

[State 0, VelSet]
type = VelSet
Trigger1=AnimElem = 1
x = 0
y = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = animelemtime(5) < 0
attr = ,AP
stateno = 8001
time = 1
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, HitOverride]
type = HitOverride
triggerall = enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || (enemynear,name = "Nitori Kawashiro" && (enemynear,stateno >= 13000 || enemynear,numhelper(14400) || enemynear,numhelper(13301))) || enemynear,name = "ONI-MIKO-REIMU"
trigger1 = animelemtime(5) < 0
attr = ,AA,AP,AT
stateno = 8001
time = 1
ignorehitpause = 1
nothitstate = 1
hotype = 1
destroyaggressor = 6451
allproj = 1
allhelpers = 1;(enemynear,name = "Vargskelethor" || (enemynear,name = "Fujiwara_no_Mokou" && enemynear,authorname = "isu"))

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 59
value = 1800

[State 800,v1=0]
Type=varSet
Trigger1=AnimElem = 1
var(1) = var(1)

[State 810,Snd2]
Type=playSnd
Trigger1=AnimElem = 1
value=2,9
channel=4


[State 800,AttackDist]
Type=AttackDist
Trigger1=!IsHelper
value=0
IgnoreHitPause=1

[State 800,hitdef]
Type=HitDef
Trigger1=!MoveContact && !MoveReversed && clsn1
Attr=,NT
Hitflag=MAF
Priority=1,Miss
SparkNo=-1
P1sprPriority=1
P2facing=1
P1StateNo=1810
P2StateNo=1821
id = 1800
nochainid = 1800
numhits = 0
Guard.Dist=0
fall=1
fall.recover = 0
abshit = (sysvar(2)) || (pause > 0) || (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth") || (enemynear,name = "final dio" && enemynear,stateno >= 3000) || (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,name = "Yorihime Watatsuki" || enemynear,authorname = "nns")
nohelper = (enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth" || enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU" || enemynear,authorname = "nns")
nobox = (enemynear,name = "bernkastel" || enemynear,name = "ONI-MIKO-REIMU") && (p2bodydist X + const(size.ground.front) <= 96 && p2dist X >= 11 && p2dist Y >= -79)

[State 800,hitdef]
Type=Null;HitDef
Trigger1=!MoveContact && !MoveReversed && clsn1 && (pause > 0 || enemynear,name = "Kumagawa Misogi" || enemynear,name = "Labyrinth")
Attr=
Hitflag=MAF
Priority=1,Miss
hitonce = 1
SparkNo=-1
P1sprPriority=1
P2facing=1
P1StateNo=1810
P2StateNo=1821
id = 1800
nochainid = 1800
numhits = 0
Guard.Dist=0
fall=1
fall.recover = 0
abshit = 1


[State 800,End]
Type=SelfState
Trigger1=AnimTime=0
value=0
Ctrl=1

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;そげぶ投げ
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Statedef 1810]
Type=S
MoveType=A
physics=N
Anim=1810
Ctrl=0
Poweradd=55
movehitpersist = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT
time = 1

[State 810, 9]
type = Width
trigger1 = 1
value =30,30;キャラの前の幅,後ろの幅と設定してください。

[State 810,Snd1]
Type=playSnd
Trigger1=AnimElem=6
value=2,10
channel = 4

[State 810,Snd2]
Type=playSnd
Trigger1=AnimElemTime(1)=0
value=1,8


[State 810,Snd2]
Type=playSnd
Trigger1=animelemtime(6)=0
value=0,12

[State 810,Snd2]
Type=playSnd
Trigger1=animelemtime(7)=0
value=0,13

[State 810,End]
type = Turn
Trigger1=!time;AnimElemTime(8)=0

[State 810,bind 1]
Type=TargetBind
Trigger1=AnimElemTime(1)>=0
Trigger1=AnimElemTime(2)<0
Pos=floor(-50*const(Size.xScale)),-50

[State 810,bind 1]
Type=TargetBind
Trigger1=AnimElemTime(2)>=0
Trigger1=AnimElemTime(3)<0
Pos=floor(-10*const(Size.xScale)),-75

[State 810,bind 1]
Type=TargetBind
Trigger1=AnimElemTime(3)>=0
Trigger1=AnimElemTime(4)<0
Pos=floor(0*const(Size.xScale)),-80

[State 810,bind 1]
Type=TargetBind
Trigger1=AnimElemTime(4)>=0
Trigger1=AnimElemTime(5)<0
Pos=floor(25*const(Size.xScale)),-60

[State 810,bind 1]
Type=TargetBind
Trigger1=AnimElemTime(5)>=0
Trigger1=AnimElemTime(6)<0
Pos=floor(45*const(Size.xScale)),-30

[State 810,bind 1]
Type=TargetBind
Trigger1=AnimElemTime(6)>=0
Trigger1=AnimElemTime(7)<0
Pos=floor(60*const(Size.xScale)),-15

[State 810,bind 1]
Type=TargetBind
Trigger1=AnimElemTime(7)>=0
Trigger1=AnimElemTime(7)<1
Pos=floor(60*const(Size.xScale)),0

[State -1,Explod]
Type=Explod
Trigger1=animelemtime(6)=0
Anim=6025
PosType=p1
Pos=65*const(Size.xScale),5
Ownpal=0
SprPriority=5
OnTop=0
RemoveTime=-2
;scale=.5,.5
IgnoreHitPause=1
Persistent=0
SuperMoveTime=9**8
PauseMoveTime = -1

[State -1,Explod]
Type=Explod
Trigger1=animelemtime(6)=1
Anim=6060
PosType=p1
Pos=60*const(Size.xScale),15
Ownpal=0
SprPriority=-1
OnTop=0
RemoveTime=-2
scale=.5,.5
IgnoreHitPause=1
Persistent=0
SuperMoveTime=9**8
PauseMoveTime = -1

[State 810,Damage]
Type=TargetLifeAdd
Trigger1=AnimElem = 6
value=-Ceil(102/(fvar(0)-fvar(1)))

[State 0, HitAdd]
type = HitAdd
trigger1 = numtarget && animelem = 6
value = 1

[State 0, VarSet]
type = TargetVarSet
trigger1 = numtarget = 1 && target,life <= 0 && animelemtime(6) < 0
sysvar(56) = 4
ignorehitpause = 1

[State 820,shake]
Type=EnvShake
Trigger1=AnimElemTime(6)=0
Time=20

[State 1750,v1=0]
Type=varSet
Trigger1=AnimElemTime(8)=6
var(1)=1

[State 810,End]
Type=ChangeState
Trigger1=AnimTime=0
value=0
Ctrl=1

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;(Enemy)投げ用ステート
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Statedef 1821]
Type=A
MoveType=H
physics=N
velset=0,0

[State 820,1]
Type=ChangeAnim2
Trigger1=Time=0
value=1820

[State 820,1]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

	[State 2990,Pos]
		Type=Offset
		Trigger1=1
		y=-const(size.draw.offset.y)

	[State 1821]
		type = Changestate
		trigger1 = animtime=0
		value=1822

;--------------------------------------
[Statedef 1822,床接地してバウンド]
	type = A
	movetype = H
	physics = N

[State 810,End]
type = Turn
Trigger1=Time=0

	[State 2990,Pos]
		Type=Null;Offset
		Trigger1=1
		y=-const(size.draw.offset.y)

	[State 7070]
		type = changeanim
		trigger1 = time = 0
		value = 5170; 激突後バウンドして仰向けで倒れるまでのアニメ

	[State 7070，床接地]
		type = PosSet
		trigger1 = time = 0
		y = 0

	[State 7070，床接地]
		type = velSet
		trigger1 = time = 0
		x = 0
		y = 0

	[State 7070]
		type = playerpush
		trigger1 = 1
		value = 1

	[State 7070]
		type = PosSet
		trigger1 = time = 4
		y = -25

	[State 7070]
		type = velSet
		trigger1 = time = 4
		x = -.75
		y = -6.25

	[State 7070]
		type = velAdd
		trigger1 = time >= 4
		y = 0.45

	[State 7070]
		type = Changeanim
		triggerAll = time >= 4
		trigger1 = Anim =5170
		trigger1 = AnimTime =0
		value = 5050

	[State 7070]
		type = Selfstate
		triggerAll = time >= 4
		trigger1 = Vel Y > 0
		trigger1 = Pos Y >= 0
		value = 5100

	[State a, error]
		type = SelfState ;ステートを戻す
		trigger1 = Time >= 600 ;5秒経過・動作が長い場合はもっと長く。短くしすぎないように注意。
		value = 5050 ;汎用くらい吹っ飛びステートへ